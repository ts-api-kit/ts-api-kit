---
title: "Simple Example"
description: "A minimal TS API Kit project with validation, routing, and OpenAPI generation."
---

This example mirrors a starter project that exposes CRUD-style routes, validates every request, and generates OpenAPI output. Use it as a reference when wiring up your own services.

## Project layout

```text
simple-example/
├── package.json
├── tsconfig.json
├── openapi.json            # Generated by the compiler
└── src/
    ├── index.ts            # Entry point using serve()
    ├── server.ts           # Optional Server-based bootstrap
    ├── routes/
    │   ├── +route.ts       # Root greeting route
    │   ├── +config.ts      # Global config and CORS
    │   ├── +middleware.ts  # Logging middleware
    │   └── users/
    │       ├── +route.ts   # /users (GET, POST)
    │       └── [id]/+route.ts # /users/:id (GET, PUT, DELETE)
    └── schemas/
        └── user.ts
```

## Dependencies

```bash
pnpm add @ts-api-kit/core valibot
pnpm add -D @ts-api-kit/compiler typescript
```

## Entry point

```ts
// src/index.ts
import { serve } from "@ts-api-kit/core";

await serve({
  port: 3000,
  openapi: {
    info: { title: "Simple API", version: "1.0.0" },
  },
  openapiOutput: {
    mode: "file",
    path: "./openapi.json",
    project: "./tsconfig.json",
  },
});
```

## Shared schema

```ts
// src/schemas/user.ts
import * as v from "valibot";

export const User = v.object({
  id: v.string(),
  name: v.string(),
  email: v.pipe(v.string(), v.email()),
  createdAt: v.string(),
});

export const CreateUser = v.omit(User, ["id", "createdAt"]);
```

## Routes

```ts
// src/routes/+route.ts
import { handle, response } from "@ts-api-kit/core";

export const GET = handle(
  {
    openapi: {
      summary: "Service info",
      responses: {
        200: response.of<{ status: string; version: string }>(),
      },
    },
  },
  ({ response }) => response.ok({ status: "ok", version: "1.0.0" })
);
```

```ts
// src/routes/users/+route.ts
import { handle, response } from "@ts-api-kit/core";
import * as v from "valibot";
import { CreateUser, User } from "../../schemas/user";

const Query = v.object({
  page: v.optional(v.number(), 1),
  perPage: v.optional(v.number(), 20),
});

export const GET = handle(
  {
    openapi: {
      summary: "List users",
      request: { query: Query },
      responses: {
        200: response.of<{ users: v.InferOutput<typeof User>[]; pagination: v.InferOutput<typeof Query> }>({
          description: "Successful response",
        }),
      },
    },
  },
  async ({ query, response }) => {
    const users = await listUsers(query.page, query.perPage);
    return response.ok({ users, pagination: query });
  }
);

export const POST = handle(
  {
    openapi: {
      summary: "Create user",
      request: { body: CreateUser },
      responses: {
        201: response.of<v.InferOutput<typeof User>>({ description: "Created" }),
        400: response.of<{ error: string }>({ description: "Invalid payload" }),
      },
    },
  },
  async ({ body, response }) => {
    const user = await createUser(body);
    return response.created(user);
  }
);
```

```ts
// src/routes/users/[id]/+route.ts
import { handle, response } from "@ts-api-kit/core";
import * as v from "valibot";
import { User } from "../../../schemas/user";

const Params = v.object({ id: v.string() });

export const GET = handle(
  {
    openapi: {
      summary: "Get user",
      request: { params: Params },
      responses: {
        200: response.of<v.InferOutput<typeof User>>(),
        404: response.of<{ error: string }>(),
      },
    },
  },
  async ({ params, response }) => {
    const user = await getUser(params.id);
    if (!user) return response.notFound({ error: "User not found" });
    return response.ok(user);
  }
);
```

## Middleware and config

```ts
// src/routes/+middleware.ts
import { defineMiddleware } from "@ts-api-kit/core";

export const middleware = defineMiddleware(async (c, next) => {
  console.log(`${c.req.method} ${c.req.url}`);
  await next();
});
```

```ts
// src/routes/+config.ts
import type { DirConfig } from "@ts-api-kit/core";

const config: DirConfig = {
  cors: { origin: "*", credentials: true },
  rateLimit: { windowMs: 60_000, max: 120 },
};

export default config;
```

## Scripts

```json
{
  "scripts": {
    "dev": "node --loader @ts-api-kit/core/node --no-warnings src/index.ts",
    "build:openapi": "pnpm exec @ts-api-kit/compiler generate-openapi --project ./tsconfig.json --output ./openapi.json"
  }
}
```

## Running the example

```bash
pnpm install
pnpm dev
```

Test a few endpoints:

```bash
curl http://localhost:3000/
curl http://localhost:3000/users?page=1&perPage=5
curl -X POST http://localhost:3000/users \
  -H "content-type: application/json" \
  -d '{"name":"Ada", "email":"ada@example.com"}'
```

Open `http://localhost:3000/docs` in the browser to view the Scalar UI. `openapi.json` updates whenever the schema changes.

## Next steps

- Extend the example with authentication middleware
- Hook it up to a database or persistence layer
- Compare with the [Frontend Example](/examples/frontend-example) to see a full stack in action

